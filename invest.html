<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Investasi | IndoCapital</title>
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>
  <header class="topbar">
    <img src="assets/logo.svg" class="logo-small" alt="IndoCapital">
    <h1>Investasi</h1>
  </header>

  <main class="dashboard-container">
    <section class="balance-card">
      <p>Saldo Kamu</p>
      <h2 id="userBalance">Rp0</h2>
    </section>

    <section class="invest-card">
      <h3>Pilih Produk Investasi</h3>

      <form id="investForm">
        <label for="product">Produk</label>
        <select id="product" required>
          <option value="">-- Pilih Produk --</option>
          <option value="emas">Investasi Emas</option>
          <option value="crypto">Crypto Fund</option>
          <option value="startup">Startup Capital</option>
        </select>

        <label for="amount">Jumlah Investasi (Rp)</label>
        <input type="number" id="amount" placeholder="Minimal 100.000" min="100000" required>

        <label for="payment">Metode Pembayaran</label>
        <select id="payment" required>
          <option value="">-- Pilih Metode --</option>
          <option value="bank">Transfer Bank</option>
          <option value="ewallet">E-Wallet</option>
          <option value="tripay">Tripay (Gateway)</option>
        </select>

        <button type="submit" class="btn-primary">Bayar Sekarang</button>
      </form>
    </section>

    <section id="paymentResult" class="hidden">
      <h3>Pembayaran Berhasil ✅</h3>
      <p>Investasi kamu sebesar <span id="paidAmount"></span> telah tercatat.</p>
      <a href="dashboard.html" class="btn-secondary">Kembali ke Dashboard</a>
    </section>
  </main>

  <nav class="bottom-nav">
    <a href="dashboard.html">🏠</a>
    <a href="invest.html" class="active">💰</a>
    <a href="history.html">📜</a>
    <a href="profile.html">👤</a>
    <a href="referral.html">🔗</a>
  </nav>

  <script src="assets/script.js"></script>
  <script>
    const user = JSON.parse(localStorage.getItem('currentUser')) || null;
    if (!user) window.location.href = 'index.html';
    document.getElementById('userBalance').textContent = 'Rp' + (user.balance || 0).toLocaleString();

    const form = document.getElementById('investForm');
    const result = document.getElementById('paymentResult');

    form.addEventListener('submit', e => {
      e.preventDefault();
      const amount = parseInt(document.getElementById('amount').value);
      user.balance = (user.balance || 0) + amount;
      localStorage.setItem('currentUser', JSON.stringify(user));

      const txHistory = JSON.parse(localStorage.getItem('transactions')) || [];
      txHistory.push({ type: 'Investasi', amount, date: new Date().toLocaleString() });
      localStorage.setItem('transactions', JSON.stringify(txHistory));

      document.getElementById('paidAmount').textContent = 'Rp' + amount.toLocaleString();
      form.classList.add('hidden');
      result.classList.remove('hidden');
    });
  </script>
</body>
</html>
